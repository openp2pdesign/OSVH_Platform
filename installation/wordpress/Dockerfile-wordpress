FROM wordpress:latest

RUN apt update && \
    apt upgrade -y && \
    apt autoremove && \
    apt install -y \
    vim \
    wget \
    unzip

RUN cd usr/s/rc/wordpress/wp-content/plugins/

RUN wget https://downloads.wordpress.org/plugin/really-simple-ssl.6.2.0.zip
RUN unzip really-simple-ssl.6.2.0.zip
RUN rm really-simple-ssl.6.2.0.zip

COPY ["wp-content/themes","/usr/src/wordpress/wp-content/themes"]
COPY ["wp-content/plugins","/usr/src/wordpress/wp-content/plugins"]
COPY ["wp-content/uploads","/usr/src/wordpress/wp-content/uploads"]

COPY ./config/uploads.ini /usr/local/etc/php/conf.d/uploads.ini